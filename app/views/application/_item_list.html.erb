<div class="item-list">
    <% @items.each do |item| %>
    <div class="item-image hoverable">
        <%= image_tag(item.picture) if item.picture.attached?  %>
        <div id="photo<%= item.id %>" class="collapse buying-div">
                <%= form_with url: carts_path(item.id), method: :post do |form| %>
                    <%= form.label "quantity" %>
                    <%= form.hidden_field :item_id, value: item.id %>
                    <%= form.number_field :quantity, value: 1, in: 1.0..1000.0, step: 1,class: "form-control transparent"%><br>
                    <%= form.submit "Ajouter au Panier", class: "btn btn-sm btn-outline-warning" %>
                <% end %>
                <br>
                <%= link_to "Acheter cet article", new_charge_path, class: "btn btn-sm btn-outline-warning" %>
        </div>
    </div>
    <% end %>
</div>

<script>
    items = document.getElementsByClassName("hoverable")
    for (let i = 0; i < items.length; i++){
        items[i].addEventListener("mouseover", function(){
            document.getElementsByClassName("buying-div")[i].classList.toggle("collapse")
            document.getElementsByClassName("buying-div")[i].classList.toggle("darken")
        })
    }
    for (let i = 0; i < items.length; i++){
        items[i].addEventListener("mouseout", function(){
            document.getElementsByClassName("buying-div")[i].classList.toggle("collapse")
            document.getElementsByClassName("buying-div")[i].classList.toggle("darken")
        })
    }
</script>